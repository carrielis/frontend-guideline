---
layout: default
---


<div class="heading" id="toc">
    <h2>目錄</h2>
</div>
<div class="section toc">
    <div class="col">
        <h4><a href="#css">CSS</a></h4>
        <ul>
            <li><a href="#css-syntax">CSS 語法</a></li>
            <li><a href="#css-declaration-order">宣告順序</a></li>
            <li><a href="#css-media-queries">Media query 擺放位置</a></li>
            <li><a href="#css-prefixed-properties">具前綴的特性</a></li>
            <li><a href="#css-single-declarations">單一宣告規則</a></li>
            <li><a href="#css-shorthand">簡寫記法</a></li>
            <li><a href="#css-nesting">CSS preprocessor (SASS, SCSS ...) 中的巢狀</a></li>
            <li><a href="#css-comments">註解</a></li>
            <li><a href="#css-classes">Class 名稱</a></li>
            <li><a href="#css-selectors">選擇器</a></li>
            <li><a href="#css-organization">組織</a></li>
            <li><a href="#css-zindex-order">z-index 管理</a></li>
        </ul>
    </div>
</div>


<div class="heading" id="css">
    <h2>CSS</h2>
</div>

<div class="section" id="css-syntax">
    <div class="col">
        <h3>語法</h3>
        <ul>
            <li>使用 4 個空格的 soft tabs <br>
                ─ 這是唯一可以保證程式碼在任何環境下，render 結果一致的方法。</li>
            <li>幫選擇器分組時，獨立的選擇器自成一行。</li>
            <li>左大括號左邊留 1 個空白來提升可讀性。</li>
            <li>右大括號應另起新行。</li>
            <li>每條宣告裡的 <code>:</code> 後面留一個空白。</li>
            <li>每條宣告應自成一行，錯誤會回報的更精準。</li>
            <li>每條宣告用分號結束。</li>
            <li>以逗號分隔的特性，逗號後要加一個空白<br>
                （比如右例的 <code>box-shadow</code>，<code>inset</code>前方逗號後有留空白）。</li>
            <li>小數值簡寫成 <code>.5</code>，不要寫成 <code>0.5</code>。</li>
            <li>hex 值全小寫，如：<code>#fff</code>。<br>
                在快速掃過文件時，小寫符號比大寫符號更容易分辨，因為形狀較為不同。</li>
            <li>盡可能使用 hex 值的簡寫，比如用 <code>#fff</code> 來取代 <code>#ffffff</code>。<br>
                色碼盡量不使用 英文縮寫，除非在 preprocessor 裡使用 color function 時的簡寫。</li>
            <li>選擇器中的屬性值要用雙引號包起來，比如 <code>input[type="text"]</code>。<br>
                <a href="http://mathiasbynens.be/notes/unquoted-attribute-values#css">屬性值只有某些情況下可省略</a>，加引號的一致性更好。</li>
            <li>0 不用寫單位。寫成 <code>margin: 0;</code> 而不是 <code>margin: 0px;</code>。</li>
        </ul>
        <p>對於這裡使用的術語有任何問題嗎？請參考維基百科上關於<a href="http://en.wikipedia.org/wiki/Cascading_Style_Sheets#Syntax">層疊樣式表條目裡的語法小節</a>。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/syntax.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-declaration-order">
    <div class="col">
        <h3>宣告順序</h3>
        <p>相關的屬性宣告應以下列順序分組：</p>
        <ol>
            <li>Positioning</li>
            <li>Box Model</li>
            <li>Typographic</li>
            <li>Visual</li>
        </ol>
        <p>Positioning，與位置有關的宣告放最前面，因為這可以從正常文件順序裡移除元素，或是覆寫牽扯到 Box Model 的樣式。Box Model 放下一個。因為它決定元件的位置與尺寸。</p>
        <p>其它只在元件<strong>內部</strong>起作用的屬性放最後，因為這不會影響前兩者。</p>
        <p>關於屬性順序的完整列表，請參考 <a href="http://twitter.github.com/recess">Recess</a>、<a href="https://github.com/necolas/idiomatic-css#declaration-order">idiomatic-css #declaration-order</a>。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/declaration-order.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-media-queries">
    <div class="col">
        <h3>Media Query 擺放位置</h3>
        <p>將 Media Query 與其最相關的規則放在一起。別把他們放在 CSS 檔案最後面，或是獨立成另外的樣式表。這樣只會讓之後接手的人錯過他們。右邊是個經典範例。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/media-queries.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-prefixed-properties">
    <div class="col">
        <h3>具前綴的屬性</h3>
        <p>使用帶有各家廠商前綴的屬性時，縮排每個屬性、垂直對齊，以便多行編輯。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/prefixed-properties.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-single-declarations">
    <div class="col">
        <h3>單行宣告</h3>
        <p>當一組規則<strong>只包含單條宣告的</strong>的情況裡，考慮移除換行；寫成單行的可讀性更高、更容易編輯。任何包含多條宣告的一組規則應該要分為多行。</p>
        <p>這麼分的關鍵因素是錯誤偵測─比如：CSS Validator 表示 183 行有語法錯誤。如果是單行宣告便就是那行，多條宣告沒分行的話則會找到抓狂。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/single-declarations.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-shorthand">
    <div class="col">
        <h3>簡寫記法</h3>
        <p>宣告盡量少用簡寫，最好明確的將所有的值寫出來。過度濫用簡寫的特性包含：</p>
        <ul>
            <li><code>padding</code></li>
            <li><code>margin</code></li>
            <li><code>font</code></li>
            <li><code>background</code></li>
            <li><code>border</code></li>
            <li><code>border-radius</code></li>
        </ul>
        <p>通常我們只需設定需要的值，簡寫會設定到多餘的值。舉例來說，HTML 標題只會設定 top 與 bottom margin，所以只要更改這兩個值即可。濫用特性縮寫只會寫出更差的程式碼，也會有無謂的覆寫與不預期的副作用。</p>
        <p>Mozilla Developer Network 有篇很好的專文，給不熟悉記法與行為的開發者：<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Shorthand_properties">特性簡寫</a>。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/shorthand.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-nesting">
    <div class="col">
        <h3>CSS preprocessor (SASS, SCSS ...) 裡的巢狀</h3>
        <p>避免無謂的巢狀。可用巢狀不表示都要用巢狀。<br>
            只在多元素需要巢狀，或是需要在父元素下增加樣式的場景下使用巢狀。</p>
    </div>
    <div class="col">
        {% highlight scss %}{% include css/nesting.scss %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-comments">
    <div class="col">
        <h3>註解</h3>
        <p>程式碼是由人來撰寫與維護的。<br>
            確保程式碼精準描述、有良好的註解，讓別人看起來是很親切。<br>
            好的註解傳遞意圖、意境。<br>
            註解不要只是重複元件或是 Class 的名稱。</p>
        <p>長註解記得使用完整的句子，一般的筆記用簡潔的用語。</p>
    </div>
    <div class="col">
        {% highlight css %}{% include css/comments.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-classes">
    <div class="col">
        <h3>Class 名稱</h3>
        <ul>
            <li>採用 BEM naming, 兩個下底線代表階層，兩個連接號代表狀態</li>
            <li>Class 名稱為小寫，非 BEM 規則時盡量使用連接號，dash。（不要使用底線或 camelCase）。<br>
                連接號作為相關 Class 的分類符。（像是 <code>.btn</code> 和 <code>.btn-danger</code>）。</li>
            <li>避免使用過短、隨便的縮寫。 <em>button</em> 簡寫為 <code>.btn</code> 很好，但 <code>.s</code> 不代表任何元素。</li>
            <li>盡量保持 Class 簡潔有力。</li>
            <li>使用有意義的名字；使用有意義、能說明結構的名稱，而不是外表看起來的名稱。</li>
            <li>根據最近的父類、基類加上前綴。</li>
            <li>使用 <code>.js-*</code> Class 來標示行為（相對樣式來說），這些類別放在另外的 CSS。</li>
        </ul>
    </div>
    <div class="col">
        {% highlight css %}{% include css/class-names.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-selectors">
    <div class="col">
        <h3>選擇器</h3>
        <ul>
            <li>就 render 的性能來說，使用 Class 會比通用的元素標籤好。</li>
            <li>重複出現的元件，避免使用多個屬性選擇器（比如：<code>[class^="..."]</code>）。大家都知道這會影響到瀏覽器的性能。</li>
            <li>保持選擇器簡短，每個選擇器盡量不要超過 3 個元素。</li>
            <li><strong>只</strong>在需要的情況下使用後代 Class （比如沒有使用前綴 class 的情況）。</li>
        </ul>
        <p>延伸閱讀：</p>
        <ul>
            <li><a href="http://markdotto.com/2012/02/16/scope-css-classes-with-prefixes/">Scope CSS classes with prefixes</a></li>
            <li><a href="http://markdotto.com/2012/03/02/stop-the-cascade/">Stop the cascade</a></li>
        </ul>
    </div>
    <div class="col">
        {% highlight css %}{% include css/selectors.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-organization">
    <div class="col">
        <h3>組織</h3>
        <ul>
            <li>依元件組織程式碼段落。</li>
            <li>使用一致的註解層級。</li>
            <li>程式碼分段使用定量的空白，瀏覽大檔案時很有幫助。</li>
            <li>維護多個 CSS 檔案時，依照元素而不是頁面來分類。頁面可能會改，但元件移動就可以了。</li>
        </ul>
    </div>
    <div class="col">
        {% highlight css %}{% include css/organization-comments.css %}{% endhighlight %}
    </div>
</div>

<div class="section" id="css-zindex-order">
    <div class="col">
        <h3>z-index 管理</h3>
        <p>
            羅列目前較有 z-index 問題如下：
        </p>
        <ol>
            <li>@首頁: globalbar</li>
            <li>@前台: topbar</li>
            <li>@前台: AD, MIB.freeze</li>
            <li>@後台: dialog</li>
        </ol>
        <p>
            基本 <code>z-index</code> = order 數字 * 1000，<br>
            <strong>有異動需更新文件</strong>。
        </p>
    </div>
</div>

<div class="section" id="css-editor-prefs">
    <div class="col">
        <h3>編輯喜好</h3>
        <p>使用下列設定來設定編輯器，避免掉常見的程式碼不一致和醜陋的 diffs：</p>
        <ul>
            <li>使用四個空白的 soft-tabs。</li>
            <li>存檔時抹除行尾空白。</li>
            <li>編碼設定為 UTF-8。</li>
            <li>檔案最後加入一空白行。</li>
        </ul>
        <p>考慮將以上偏好應用到專案的 <code>.editorconfig</code> 檔案並撰寫文件說明。舉個例子，參考 <a href="https://github.com/twbs/bootstrap/blob/master/.editorconfig">Bootstrap 的 <code>.editorconfig</code></a>。瞭解更多內容，請參考 <a href="http://editorconfig.org">editorconfig.org</a>。</p>
    </div>
</div>
